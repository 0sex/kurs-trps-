# Drug Analog Search System

Система поиска аналогов лекарственных препаратов — настольное приложение для поиска аналогов медикаментов на основе действующих веществ.

## Описание

Приложение позволяет пользователям:
- **Просматривать весь список препаратов** при запуске
- Искать аналоги препаратов по действующему веществу
- Фильтровать результаты по форме выпуска, производителю и цене
- Сравнивать несколько препаратов
- Добавлять, редактировать и удалять препараты
- Экспортировать результаты в CSV и JSON форматы

## Технологии

- **Python 3.13**
- **PyQt5** — для графического интерфейса
- **SQLite** — для хранения данных

## Архитектура

Проект следует модульной архитектуре:

```
Kurs/
├── main.py                 # Точка входа приложения
├── database.py             # Модуль работы с БД (CRUD операции)
├── search_engine.py        # Логика поиска аналогов
├── ui_main.py              # Основной GUI интерфейс
├── tests/                  # Тесты
│   ├── __init__.py
│   ├── test_search_engine.py
│   └── test_database.py
├── requirements.txt        # Зависимости
├── README.md              # Документация
└── drugs.db               # База данных SQLite (создается автоматически)
```

## Установка

1. Клонируйте репозиторий или скачайте файлы проекта

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Запуск

Запустите приложение:
```bash
python main.py
```

или напрямую:
```bash
python ui_main.py
```

## Использование

### Просмотр препаратов

- При запуске приложения автоматически загружается полный список всех препаратов
- Для повторной загрузки списка используйте меню **Файл → Показать все препараты**

### Поиск аналогов

1. Введите название препарата в поле поиска
2. Нажмите "Найти аналоги" или Enter
3. Результаты отобразятся в таблице

### Фильтрация

- **Форма выпуска**: выберите нужную форму выпуска
- **Производитель**: введите название производителя
- **Цена**: установите минимальную и максимальную цены
- Нажмите "Очистить" для сброса фильтров

### Сравнение препаратов

1. Отметьте препараты в колонке "Выбор"
2. Нажмите "Сравнить выбранные"
3. Просмотрите сравнение в диалоговом окне

### Управление данными

Меню **Файл**:
- **Добавить препарат**: добавить новый препарат
- **Редактировать препарат**: изменить выбранный препарат
- **Удалить препарат**: удалить выбранный препарат

### Экспорт

- **Экспорт в CSV**: сохранить результаты в CSV файл
- **Экспорт в JSON**: сохранить результаты в JSON файл

## Тестирование

Запустите тесты:
```bash
python -m pytest tests/
```

или с помощью unittest:
```bash
python -m unittest discover tests
```

## Структура базы данных

### Таблица `drugs`

| Колонка | Тип | Описание |
|---------|-----|----------|
| id | INTEGER | Первичный ключ |
| name | TEXT | Название препарата |
| substance | TEXT | Действующее вещество |
| form | TEXT | Форма выпуска |
| manufacturer | TEXT | Производитель |
| price | REAL | Цена |
| created_at | TIMESTAMP | Дата создания |

### Таблица `analog_links`

| Колонка | Тип | Описание |
|---------|-----|----------|
| id | INTEGER | Первичный ключ |
| drug_id | INTEGER | ID препарата |
| analog_id | INTEGER | ID аналога |
| similarity_score | REAL | Оценка сходства |

## Алгоритм поиска

Поиск аналогов основан на:
1. Совпадении действующего вещества (обязательно)
2. Форме выпуска (+0.3 к сходству)
3. Производителе (+0.2 к сходству)
4. Близости цены (+0.1-0.2 к сходству)

Результаты сортируются по убыванию сходства, затем по возрастанию цены.

## Примеры данных

База данных содержит демонстрационные данные для 20 препаратов, включая:
- Обезболивающие и жаропонижающие (Парацетамол, Ибупрофен)
- Антибиотики (Амоксициллин, Амоксиклав)
- Антигистаминные (Лоратадин, Цетрин)
- Сердечно-сосудистые (Эналаприл)

## Особенности

- Автоматическое создание БД при первом запуске
- Заполнение демонстрационными данными
- Валидация ввода
- Обработка ошибок с информативными сообщениями
- Чистый, документированный код (PEP8)
- Полное покрытие тестами

## Разработка

Код следует стандартам PEP8 и включает:
- Docstrings для всех классов и функций
- Комментарии для сложной логики
- Type hints (где уместно)
- Модульную архитектуру

## Лицензия

Проект создан в учебных целях.

## Автор

Разработано как курсовая работа по дисциплине программирования.

